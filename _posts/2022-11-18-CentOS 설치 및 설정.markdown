---
layout: Vagrant 를 이용한  CentOS 설치 및 계정 설정
title:  "Vagrant 를 이용한 CentOS 설치 및 계정 설정"
date:   2022-11-18 23:56 +0900
categories: darktemi update
---

# Vagrant 를 이용한 CentOS 설치 및 계정 설정

---
## Vagrant 설치

<img src = "https://upload.wikimedia.org/wikipedia/commons/thumb/8/87/Vagrant.png/150px-Vagrant.png">

- [Vagrant 사이트](https://www.vagrantup.com/) 접속
- Download 클릭
- 호스트 OS에 맞춰서 설치
- 설치 확인
```bash
$ vagrant -v
```

---
## VirtualBox 설치

<img src = "https://upload.wikimedia.org/wikipedia/commons/thumb/d/d5/Virtualbox_logo.png/100px-Virtualbox_logo.png">

Virtualbox 설치

- [Virtualbox 사이트](https://www.virtualbox.org/) 접속
- Downloads/호스트 OS에 맞는 패키지 다운로드
- Virtualbox 설치

---
## 가상 머신 프로젝트 폴더 생성

```bash
~$ mkdir vm-project
~$ cd vm-project
~/vm-project$ mkdir centos
~/vm-project$ cd centos
~/vm-project/centos$ 
```

---
## Variant Box(가상머신 이미지) 찾기

- [가상머신이미지 저장소 사이트](https://app.vagrantup.com/) 접속
- 'centos' 검색 해서 vagrant를 클릭
- <https://app.vagrantup.com/centos/boxes/7> 위 사이트로 접속이 되면 vagrantfile 부분의 소스 코드를 직접 입력하거나
'''
~/vm-project/centos$ vagrant init "centos/7"
'''입력하면 vagrantfile 이 생성됨

---
## vs code에서 Vagrant 설정 파일(Vagrantfile) 준비

vscode에서 ~/vm-project/centos 폴더에 있는
vagrantfile 파일을 확인<br>

```bash
~/vm/centos$ vagrant init centos/7
~/vm/centos$ cat Vagrantfile
Vagrant.configure("2") do |config|
  # ...
end
```
do~와 end 사이에
config.vm.hostname=”myhost.bitcamp” 라고 입력을 하면
호스트 이름을 myhost로 centos vm을 생성함

---
### Box 다운로드 및 VM 생성, 실행

```bash
~/vm/centos$ vagrant up
```

---
### 가상 머신에 ssh 접속

```bash
~/vm/centos$ vagrant ssh
```

---
### VM 정지

```bash
~/vm/centos$ vagrant halt
```

---
### VM 삭제

```bash
~/vm/centos$ vagrant destroy
```

---
## 호스트 이름 설정하기 

```
# /etc/hosts 파일에 등록될 이름을 지정할 수 있다.
config.vm.hostname = "호스트명"

예) config.vm.hostname = "myhost.localhost"
```

---
## 현재 프로젝트의 머신에 SSH 접속하기

```bash
$ vagrant ssh

또는

$ vagrant ssh default
```

---
## 현재 프로젝트의 머신 상태 알아내기

```bash
$ vagrant status
Current machine states:

node1                     running (virtualbox)
node2                     running (virtualbox)

This environment represents multiple VMs. The VMs are all listed
above with their current state.
```

---
# 실행 중인 머신 접속하기

```
$ vagrant ssh node1
```

---
## 다른 프로젝트를 포함하여 머신 상태 알아내기

```bash
$ vagrant global-status
id       name    provider   state   directory                             
--------------------------------------------------------------------------
f483730  default virtualbox running /Users/eomjinyoung/virtualbox/cenos   
a3aafac  default virtualbox running /Users/eomjinyoung/virtualbox/centos2 
``` 

...
## 실행 중인 머신 접속하기

global-status에서 확인한 여러 VM의 코드를 입력

```
$ vagrant ssh a3aafac
```

---
## ssh 로 직접 접속하기

```bash
$ ssh -i .vagrant/machines/default/virtualbox/private_key vagrant@IP주소
```


